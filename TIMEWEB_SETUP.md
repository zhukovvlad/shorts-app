# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Timeweb –ë–î

## –®–∞–≥ 1: –î–æ–±–∞–≤—å —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–°–æ–∑–¥–∞–π –∏–ª–∏ –æ–±–Ω–æ–≤–∏ `.env.local` (–∏–ª–∏ `.env`):

```env
# Timeweb PostgreSQL Database
DATABASE_URL="postgresql://gen_user:–í–ê–®_–ü–ê–†–û–õ–¨@s64c08952f8065169210bf4b.twc1.net:5432/default_db?sslmode=require"
DIRECT_URL="postgresql://gen_user:–í–ê–®_–ü–ê–†–û–õ–¨@s64c08952f8065169210bf4b.twc1.net:5432/default_db?sslmode=require"
```

**–í–∞–∂–Ω–æ:** –ó–∞–º–µ–Ω–∏ `–í–ê–®_–ü–ê–†–û–õ–¨` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å –∏–∑ –ø–∞–Ω–µ–ª–∏ Timeweb!

## –®–∞–≥ 2: –ü—Ä–∏–º–µ–Ω–∏ –º–∏–≥—Ä–∞—Ü–∏—é

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ –Ω–æ–≤—É—é –ë–î
npx prisma migrate deploy

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Prisma Client
npx prisma generate
```

## –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
npx tsx scripts/test-migration.ts
```

–ï—Å–ª–∏ –≤–∏–¥–∏—à—å "üéâ –í–°–ï –ü–†–û–í–ï–†–ö–ò –ü–†–û–ô–î–ï–ù–´ –£–°–ü–ï–®–ù–û!" - –∑–Ω–∞—á–∏—Ç –≤—Å–µ –≥–æ—Ç–æ–≤–æ!

## –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
npm run dev
```

–ü–æ–ø—Ä–æ–±—É–π –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ OAuth - –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞—Ç—å—Å—è User –∏ —Ä–∞–±–æ—Ç–∞—Ç—å –≤–µ—Å—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª.

---

## –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ ‚úÖ

1. **–°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è** –≤ `prisma/migrations/20251007000000_init_nextauth/`
2. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ schema.prisma** - —É–¥–∞–ª–µ–Ω–æ —Å—Ç–∞—Ä–æ–µ –ø–æ–ª–µ `userId`
3. **–í–µ—Å—å –∫–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω**:
   - –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `User.id` –≤–º–µ—Å—Ç–æ `User.userId`
   - Foreign Keys –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
   - NextAuth –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `session.user.id`

4. **–°–æ–∑–¥–∞–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç—ã**:
   - `docs/DATABASE_MIGRATION.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
   - `scripts/test-migration.ts` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

## –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

1. **–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è SSL:**
   ```env
   DATABASE_URL="...?sslmode=require&sslaccept=accept_invalid_certs"
   ```

2. **–£–∂–µ –µ—Å—Ç—å —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î:**
   ```bash
   # –í–ù–ò–ú–ê–ù–ò–ï: –£–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ!
   npx prisma migrate reset
   ```

3. **–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å:**
   - –ü—Ä–æ–≤–µ—Ä—å `docs/DATABASE_MIGRATION.md`
   - –ó–∞–ø—É—Å—Ç–∏ `npx tsx scripts/test-migration.ts`
   - –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏: `npx prisma migrate status`

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏:
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å OAuth –≤—Ö–æ–¥
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ –≤–∏–¥–µ–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É credits
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å backup –ë–î –Ω–∞ Timeweb
